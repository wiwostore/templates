name: Create File in Repo

on:
  workflow_dispatch:
    inputs:
      filename:
        description: 'Tên file (bao gồm đuôi mở rộng)'
        required: true
        default: 'file.txt'
      filepath:
        description: 'Đường dẫn folder chứa file (ví dụ: aplicas/ios)'
        required: true
        default: 'aplicas/ios'
      filecontent:
        description: 'Nội dung file'
        required: true
        default: 'File được tạo bởi GitHub Action'

jobs:
  create-file:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Tạo file với nội dung
        run: |
          mkdir -p "${{ github.event.inputs.filepath }}"
          echo "${{ github.event.inputs.filecontent }}" > "${{ github.event.inputs.filepath }}/${{ github.event.inputs.filename }}"

      - name: Commit và push thay đổi
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"
          git add "${{ github.event.inputs.filepath }}/${{ github.event.inputs.filename }}"
          git commit -m "Tạo file ${{ github.event.inputs.filename }} tại ${{ github.event.inputs.filepath }} qua Action"
          git push
